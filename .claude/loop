 # Find next task                                                                
      51  NEXT_TASK=$(grep -m1 '^\s*- \[ \]' "$PLAN_FILE" | sed 's/.*\[ \] //' | sed      
          's/"/\\"/g')                                                                    
      52                                                                                  
      53 -# Build the system message                                                      
      54 -read -r -d '' MESSAGE << MSGEOF                                                 
      55 -PLAN ITERATOR: Continue with the next task.                                     
      53 +# Build the reason message for Claude                                           
      54 +read -r -d '' REASON << MSGEOF                                                  
      55 +Plan has $REMAINING remaining tasks. Next task: $NEXT_TASK                      
      56                                                                                  
      57 -## Current Progress                                                             
      58 -Completed: $COMPLETED | Remaining: $REMAINING                                   
      57 +After completing this task:                                                     
      58 +1. Mark it done with [x] in docs/plan.md                                        
      59 +2. Consider if it's evidence for assessment criteria                            
         +(docs/Assessment-criteria.md) - if yes, run /update-report                      
      60 +3. Keep changes small, consistent with existing patterns, no AI attribution     
      61                                                                                  
      62 -## Next Task                                                                    
      63 -$NEXT_TASK                                                                      
      64 -                                                                                
      65 -## Post-Task Checklist (do after completing the task above)                     
      66 -                                                                                
      67 -1. **Mark done**: Change \`- [ ]\` to \`- [x]\` for the completed task in       
         -docs/plan.md                                                                    
      68 -                                                                                
      69 -2. **Report evaluation**: Consider if what you just implemented could serve as  
         -evidence for any criteria in docs/Assessment-criteria.md (P1-P11, D1-D4). If    
         -yes, run /update-report. If not, move on.                                       
      70 -                                                                                
      71 -3. **Working preferences**:                                                     
      72 -   - Keep changes small and focused                                             
      73 -   - Ensure code is consistent with existing patterns                           
      74 -   - Use proven, well-established approaches                                    
      75 -   - Never add AI attribution                                                   
      76 -                                                                                
      77 -## To Stop Early                                                                
      78 -Run /stop or delete .claude/loop                                                
      62 +To stop early: run /stop or delete .claude/loop                                 
      63  MSGEOF                                                                          
      64                                                                                  
      65 -# Escape message for JSON                                                       
      66 -ESCAPED_MSG=$(echo "$MESSAGE                                                    
         -" | python3 -c 'import sys,json; print(json.dumps(sys.stdin.read())[1:-1])')    
      65 +# Escape reason for JSON                                                        
      66 +ESCAPED_REASON=$(echo "$REASON                                                  
         +" | python3 -c 'import sys,json; print(json.dumps(sys.stdin.read())[1:-1])')    
      67                                                                                  
      68 -# Return JSON to continue                                                       
      69 -echo "{\"continue\": true, \"systemMessage\": \"$ESCAPED_MSG\"}"                
      68 +# Return JSON with decision: block to prevent Claude from stoppin